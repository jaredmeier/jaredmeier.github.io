<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>HUNT</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    html,
    body {
      margin: 0;
      padding: 0;
      height: 100vh;
      overflow: hidden;
    }

    body {
      background: #1b1b1b url('grunge-paper-background.jpg') no-repeat center center fixed;
      background-size: cover;
      font-family: 'Treasure Map Deadhand', cursive, serif;
      color: #f7ead3;
      display: flex;
      justify-content: flex-start;
      align-items: center;
      flex-direction: column;
      padding: 1rem;
      padding-top: calc(20vh - 3rem);
      text-align: center;
      box-sizing: border-box;
    }

    h1 {
      font-size: 1.8rem;
      margin-bottom: 1rem;
      text-shadow: 0 0 8px #000;
    }

    input {
      padding: 0.6rem;
      font-size: 1.2rem;
      border: 2px solid #c2a87c;
      border-radius: 6px;
      background: #2b2b2b;
      color: #f4e1c1;
      text-align: center;
      width: 80%;
      max-width: 300px;
      transition: border-color 0.3s;
    }

    input.error {
      border-color: red;
      animation: shake 0.3s;
    }

    @keyframes shake {
      0% {
        transform: translateX(0);
      }

      25% {
        transform: translateX(-6px);
      }

      50% {
        transform: translateX(6px);
      }

      75% {
        transform: translateX(-6px);
      }

      100% {
        transform: translateX(0);
      }
    }

    .clue {
      opacity: 0;
      margin-top: 5rem;
      font-size: 1.3rem;
      max-width: 350px;
      line-height: 1.8;
      transition: opacity 3s ease-in;
      white-space: pre-wrap;
      text-align: left;
    }

    .clue.visible {
      opacity: 1;
    }

    /* Balloon/confetti */
    .balloon {
      position: fixed;
      bottom: -100px;
      width: 40px;
      height: 60px;
      background: red;
      border-radius: 50% 50% 50% 50%;
      animation: rise 6s linear forwards;
      z-index: 100;
    }

    @keyframes rise {
      to {
        transform: translateY(-120vh) rotate(360deg);
      }
    }
  </style>
</head>

<body>
  <!-- <h1>Enter the Secret Key</h1> -->
  <input id="codeInput" type="text" placeholder="••••••" />

  <div id="clueBox" class="clue"></div>

  <script>
    // 🗝️ Dictionary of codes -> clues
    // Questions –  
    // what was the name of elliott smith’s band before he went solo?
    // what is the name of the building they live in in Rosemary’s Baby?
    // what was the name of the hot lesbian at moan and dove whom we often admired?
    const clues = {
      "heat miser": "Near a place you know and love\n(where once a love was observed),\nthere is a chapel or something like,\nthat both shades from sun,\nand stages rave music all eve long,\nand holds by its side a key\nfor your adventure.",
      "bramford": "I hear tell there is a place\nwhere you have rolled butt over face.\nIn fact it’s true, I have heard,\nin more than one sense of the word.\nAnd near this spot of mirth and glee,\na guard stands before the trees\nto keep your next prize safe and sound,\nuntil its bounty you have found.",
      "molly": "There is a place where people play,\nthey smash those balls about all day!\nWe sit and watch them flail and writhe\nuntil proud nature’s call arrives!\nWe sneak into the leaves behind,\nand what fair treasure do we find?\nA wooden corpse that stands no more,\nyour key and prize are in its store.",
      "finale": "🎉 You have reached the end!\nNow time to celebrate!!!??? 🎉"
    };

    const input = document.getElementById('codeInput');
    const clueBox = document.getElementById('clueBox');

    input.addEventListener('keypress', function (e) {
      if (e.key === 'Enter') {
        const code = input.value.trim();
        if (clues[code]) {
          // Set opacity to 0 immediately (no transition)
          clueBox.style.transition = 'none';
          clueBox.style.opacity = '0';

          // Force reflow
          void clueBox.offsetWidth;

          // Update text content
          clueBox.textContent = clues[code];

          // Re-enable transition and fade in
          requestAnimationFrame(() => {
            clueBox.style.transition = 'opacity 3s ease-in';
            clueBox.style.opacity = '1';
          });

          if (code === 'finale') {
            launchBalloons();
          }

          input.value = '';
        } else {
          input.classList.add('error');
          setTimeout(() => input.classList.remove('error'), 500);
        }
      }
    });

    function launchBalloons() {
      for (let i = 0; i < 20; i++) {
        const balloon = document.createElement('div');
        balloon.classList.add('balloon');
        balloon.style.left = Math.random() * 100 + 'vw';
        balloon.style.background = `hsl(${Math.random() * 360},70%,60%)`;
        balloon.style.animationDuration = 4 + Math.random() * 3 + 's';
        document.body.appendChild(balloon);
        setTimeout(() => balloon.remove(), 7000);
      }
    }
  </script>
</body>

</html>